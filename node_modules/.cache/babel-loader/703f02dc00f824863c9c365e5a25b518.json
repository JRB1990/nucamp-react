{"ast":null,"code":"import*as ActionTypes from'./ActionTypes';import{baseUrl}from'../shared/baseUrl';export var fetchCampsites=function fetchCampsites(){return function(dispatch){dispatch(campsitesLoading());return fetch(baseUrl+'campsites').then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \".concat(response.status,\": \").concat(response.statusText));error.response=response;throw error;}},function(error){var errMess=new Error(error.message);throw errMess;}).then(function(response){return response.json();}).then(function(campsites){return dispatch(addCampsites(campsites));}).catch(function(error){return dispatch(campsitesFailed(error.message));});};};export var campsitesLoading=function campsitesLoading(){return{type:ActionTypes.CAMPSITES_LOADING};};export var campsitesFailed=function campsitesFailed(errMess){return{type:ActionTypes.CAMPSITES_FAILED,payLoad:errMess};};export var addCampsites=function addCampsites(campsites){return{type:ActionTypes.ADD_CAMPSITES,payload:campsites};};export var fetchComments=function fetchComments(){return function(dispatch){return fetch(baseUrl+'comments').then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \".concat(response.status,\": \").concat(response.statusText));error.response=response;throw error;}},function(error){var errMess=new Error(error.message);throw errMess;}).then(function(response){return response.json();}).then(function(comments){return dispatch(addComments(comments));}).catch(function(error){return dispatch(commentsFailed(error.message));});};};export var commentsFailed=function commentsFailed(errMess){return{type:ActionTypes.COMMENTS_FAILED,payload:errMess};};export var addComments=function addComments(comments){return{type:ActionTypes.ADD_COMMENTS,payload:comments};};export var addComment=function addComment(comment){return{type:ActionTypes.ADD_COMMENT,payload:comment};};export var postComment=function postComment(campsiteId,rating,author,text){return function(dispatch){var newComment={campsiteId:campsiteId,rating:rating,author:author,text:text};newComment.date=new Date().toISOString();return fetch(baseUrl+'comments',{method:\"POST\",body:JSON.stringify(newComment),headers:{\"Content-Type\":\"application/json\"}}).then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \".concat(response.status,\": \").concat(response.statusText));error.response=response;throw error;}},function(error){throw error;}).then(function(response){return response.json();}).then(function(response){return dispatch(addComment(response));}).catch(function(error){console.log('post comment',error.message);alert('Your comment could not be posted/nError: '+error.message);});};};export var fetchPromotions=function fetchPromotions(){return function(dispatch){dispatch(promotionsLoading());return fetch(baseUrl+'promotions').then(function(response){if(response.ok){return response;}else{var error=new Error(\"Error \".concat(response.status,\": \").concat(response.statusText));error.response=response;throw error;}},function(error){var errMess=new Error(error.message);throw errMess;}).then(function(response){return response.json();}).then(function(promotions){return dispatch(addPromotions(promotions));}).catch(function(error){return dispatch(promotionsFailed(error.message));});};};export var promotionsLoading=function promotionsLoading(){return{type:ActionTypes.PROMOTIONS_LOADING};};export var promotionsFailed=function promotionsFailed(errMess){return{type:ActionTypes.PROMOTIONS_FAILED,payLoad:errMess};};export var addPromotions=function addPromotions(promotions){return{type:ActionTypes.ADD_PROMOTIONS,payload:promotions};};","map":{"version":3,"sources":["C:/Users/krist/Desktop/Josh/Learning/Nucamp/NucampFolder/3-React/nucampsite/src/redux/ActionCreators.js"],"names":["ActionTypes","baseUrl","fetchCampsites","dispatch","campsitesLoading","fetch","then","response","ok","error","Error","status","statusText","errMess","message","json","campsites","addCampsites","catch","campsitesFailed","type","CAMPSITES_LOADING","CAMPSITES_FAILED","payLoad","ADD_CAMPSITES","payload","fetchComments","comments","addComments","commentsFailed","COMMENTS_FAILED","ADD_COMMENTS","addComment","comment","ADD_COMMENT","postComment","campsiteId","rating","author","text","newComment","date","Date","toISOString","method","body","JSON","stringify","headers","console","log","alert","fetchPromotions","promotionsLoading","promotions","addPromotions","promotionsFailed","PROMOTIONS_LOADING","PROMOTIONS_FAILED","ADD_PROMOTIONS"],"mappings":"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","sourcesContent":["import * as ActionTypes from './ActionTypes';\r\nimport { baseUrl } from '../shared/baseUrl';\r\n\r\nexport const fetchCampsites = () => dispatch => {\r\n    dispatch(campsitesLoading());\r\n\r\n    return fetch(baseUrl + 'campsites')\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response;\r\n            } else {\r\n                const error = new Error(`Error ${response.status}: ${response.statusText}`);\r\n                error.response = response;\r\n                throw error;\r\n            }\r\n        },\r\n            error => {\r\n                const errMess = new Error(error.message);\r\n                throw errMess;\r\n            }\r\n        )\r\n        .then(response => response.json())\r\n        .then(campsites => dispatch(addCampsites(campsites)))\r\n        .catch(error => dispatch(campsitesFailed(error.message)));\r\n};\r\n\r\nexport const campsitesLoading = () => ({\r\n    type: ActionTypes.CAMPSITES_LOADING\r\n});\r\n\r\nexport const campsitesFailed = errMess => ({\r\n    type: ActionTypes.CAMPSITES_FAILED,\r\n    payLoad: errMess,\r\n});\r\n\r\nexport const addCampsites = campsites => ({\r\n    type: ActionTypes.ADD_CAMPSITES,\r\n    payload: campsites,\r\n});\r\n\r\nexport const fetchComments = () => dispatch => {\r\n    return fetch(baseUrl + 'comments')\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response;\r\n            } else {\r\n                const error = new Error(`Error ${response.status}: ${response.statusText}`);\r\n                error.response = response;\r\n                throw error;\r\n            }\r\n        },\r\n            error => {\r\n                const errMess = new Error(error.message);\r\n                throw errMess;\r\n            }\r\n        )\r\n        .then(response => response.json())\r\n        .then(comments => dispatch(addComments(comments)))\r\n        .catch(error => dispatch(commentsFailed(error.message)));\r\n};\r\n\r\nexport const commentsFailed = errMess => ({\r\n    type: ActionTypes.COMMENTS_FAILED,\r\n    payload: errMess,\r\n});\r\n\r\nexport const addComments = comments => ({\r\n    type: ActionTypes.ADD_COMMENTS,\r\n    payload: comments,\r\n});\r\n\r\nexport const addComment = comment => ({\r\n    type: ActionTypes.ADD_COMMENT,\r\n    payload: comment,\r\n});\r\n\r\nexport const postComment = (campsiteId, rating, author, text) => dispatch => {\r\n    const newComment = {\r\n        campsiteId,\r\n        rating,\r\n        author,\r\n        text,\r\n    };\r\n    newComment.date = new Date().toISOString();\r\n\r\n    return fetch(baseUrl + 'comments', {\r\n        method: \"POST\",\r\n        body: JSON.stringify(newComment),\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        }\r\n    })\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response;\r\n            } else {\r\n                const error = new Error(`Error ${response.status}: ${response.statusText}`);\r\n                error.response = response;\r\n                throw error;\r\n            }\r\n        },\r\n            error => { throw error; }\r\n        )\r\n        .then(response => response.json())\r\n        .then(response => dispatch(addComment(response)))\r\n        .catch (error => {\r\n            console.log('post comment', error.message);\r\n            alert('Your comment could not be posted/nError: ' + error.message);\r\n        });\r\n};\r\n\r\nexport const fetchPromotions = () => dispatch => {\r\n    dispatch(promotionsLoading());\r\n\r\n    return fetch(baseUrl + 'promotions')\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response;\r\n            } else {\r\n                const error = new Error(`Error ${response.status}: ${response.statusText}`);\r\n                error.response = response;\r\n                throw error;\r\n            }\r\n        },\r\n            error => {\r\n                const errMess = new Error(error.message);\r\n                throw errMess;\r\n            }\r\n        )\r\n        .then(response => response.json())\r\n        .then(promotions => dispatch(addPromotions(promotions)))\r\n        .catch(error => dispatch(promotionsFailed(error.message)))\r\n};\r\n\r\nexport const promotionsLoading = () => ({\r\n    type: ActionTypes.PROMOTIONS_LOADING\r\n});\r\n\r\nexport const promotionsFailed = errMess => ({\r\n    type: ActionTypes.PROMOTIONS_FAILED,\r\n    payLoad: errMess,\r\n});\r\n\r\nexport const addPromotions = promotions => ({\r\n    type: ActionTypes.ADD_PROMOTIONS,\r\n    payload: promotions,\r\n});"]},"metadata":{},"sourceType":"module"}